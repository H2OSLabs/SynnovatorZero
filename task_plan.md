# Task Plan: 完成遗留页面功能

> **目标**: 完成消息系统、星球（活动）、营地（提案）页面，基于 Figma 设计
> **创建时间**: 2026-02-08
> **状态**: `complete`

## 背景

根据用户澄清：
- **星球 (Planet)** = 活动列表页面 → 已有 `/events`，需要对齐 Figma 设计
- **营地 (Camp)** = 提案列表页面 → 需要创建 `/camps` 或复用 `/posts?type=proposal`
- **消息系统 (Message)** = 通知/私信页面 → 需要从 Figma 提取设计并实现

### Figma 设计页面统计

| 类别 | 页面数 | Figma 链接 |
|------|--------|------------|
| 消息 (Message) | 9 个 | 消息、通知（8个状态） |
| 星球 (Planet) | 8 个 | 活动列表（多个状态） |
| 营地 (Camp) | 1 个 | 提案列表 |

## 阶段列表

| Phase | 描述 | 状态 |
|-------|------|------|
| Phase 1 | 分析 Figma 设计，提取 UI 规格 | `complete` ✓ |
| Phase 2 | 实现消息/通知页面 | `complete` ✓ |
| Phase 3 | 优化星球页面（对齐 Figma） | `complete` ✓ |
| Phase 4 | 实现营地页面 | `complete` ✓ |
| Phase 5 | 验证与提交 | `complete` ✓ |

---

## Phase 1: 分析 Figma 设计 `pending`

### 目标
从 Figma 设计中提取 UI 规格，明确需要实现的页面和组件

### 任务
1. 使用 WebFetch 获取 Figma 设计内容
2. 提取页面布局、组件、交互模式
3. 记录到 findings.md

### Figma 链接
- 消息页面: `14342:227017`
- 通知页面: `14787:97895` 等
- 星球页面: `14649:62956` 等
- 营地页面: `14325:52669`

---

## Phase 2: 实现消息/通知页面 `pending`

### 需实现

| 页面 | 路由 | 功能 |
|------|------|------|
| 消息列表 | `/messages` | 显示私信对话列表 |
| 对话详情 | `/messages/[id]` | 单个对话的消息历史 |
| 通知列表 | `/notifications` | 系统通知（已有部分后端） |

### 后端 API 检查
- [ ] 检查是否有消息 API
- [ ] 检查通知 API 是否完整

---

## Phase 3: 优化星球页面 `pending`

### 现状
- 已有 `/events` 页面
- 需要对齐 Figma "星球" 设计

### 可能的改动
- 页面布局调整
- 卡片样式优化
- 添加缺失的 UI 元素

---

## Phase 4: 实现营地页面 `pending`

### 方案选择
根据用户说明，营地 = 提案列表

**选项 A**: 创建新路由 `/camps` 指向提案
**选项 B**: 复用 `/posts?type=proposal` 并优化样式

### 需确认
- 营地是否需要独立页面
- 还是在现有帖子列表中筛选

---

## Phase 5: 验证与提交 `complete`

- [x] 前端构建通过
- [x] 页面功能验证
- [x] 提交代码

### 完成总结

已完成以下工作：

1. **通知页面** (`/notifications`)
   - 标签页筛选（全部/未读/已读）
   - 标记已读、全部已读功能
   - 按类型显示图标（评论/点赞/关注/团队/系统）
   - 时间格式化（刚刚/X分钟前/X小时前等）

2. **营地页面** (`/camps`)
   - 专门展示提案类型帖子
   - URL 驱动的搜索功能
   - 状态标签页筛选（全部/已发布/待审核/草稿）
   - 链接到创建提案页面

3. **导航更新** (Sidebar.tsx)
   - 添加"星球"（原活动）导航项
   - 添加"营地"导航项
   - 添加"通知"导航项（需登录）

4. **星球页面** (`/events`)
   - 已有完善实现，无需修改

---

## 决策日志

| 日期 | 决策 | 理由 |
|------|------|------|
| 2026-02-08 | 先分析 Figma 再实现 | 避免返工 |

---

## 错误日志

| 错误 | 尝试 | 解决方案 |
|------|------|----------|
| (待记录) | | |
