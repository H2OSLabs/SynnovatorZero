# 规范化建议

本文档说明 Synnovator 平台中当前采用反范式（denormalized）设计的字段及其拆分时机建议。

> 数据类型定义详见 [docs/data-types.md](../docs/data-types.md)。

---

## 当前反范式字段

以下字段当前采用**内嵌（denormalized）**形式存储，而非拆分为独立实体：

| 字段 | 所属类型 | 内嵌形式 | 内嵌理由 |
|------|---------|---------|---------|
| `tags` | post | `list[string]` | 标签为自由文本，无需全局去重或独立管理 |
| `reviewers` | rule | `list[user_id]` | 审核人列表规模小（通常 < 10），随规则生命周期管理 |
| `scoring_criteria` | rule | 内嵌对象列表 | 评分标准与规则强绑定，跨规则不复用 |

---

## 拆分时机

- **tags**：当需要全局标签管理（合并/重命名/统计）或标签数量超过百级别时，拆分为 `tag` 实体 + `post:tag` 关系
- **reviewers**：当需要审核人工作量统计、审核任务分配等功能时，拆分为 `rule:user` 关系（role=reviewer）
- **scoring_criteria**：当多个规则需要共享同一套评分标准，或需要独立管理评分维度时，拆分为 `criteria` 实体

> **原则：** 在当前规模下优先简单性，避免过早引入关系表带来的查询复杂度。当业务需求明确要求跨实体管理时再进行拆分。
