# Page: Proposal List
route: /proposals
description: 提案列表页，展示参赛提案列表
uses_shared: [global-header, sidebar-nav, multi-function-panel]

query_params:
  status:
    type: string
    required: false
  category_id:
    type: number
    required: false

data_fetching:
  - id: proposals
    api: listPosts
    params:
      type: for_category
      status: "{query.status || 'published'}"
      skip: 0
      limit: 20
    revalidate: 60

  - id: categories
    api: listCategories
    params:
      status: published
      limit: 50
    revalidate: 300

sections:
  proposal-filter:
    description: 提案筛选栏
    layout: horizontal
    gap: 16
    components:
      status-filter:
        type: dropdown
        placeholder: 全部状态
        options:
          - label: 全部
            value: null
          - label: 草稿
            value: draft
          - label: 待审核
            value: pending_review
          - label: 已发布
            value: published
        interactions:
          - trigger: select
            action: update_url_param
            param: status
            value: "{selected.value}"

      category-filter:
        type: dropdown
        placeholder: 选择活动
        data_source: categories
        option_fields:
          label: name
          value: id
        interactions:
          - trigger: select
            action: update_url_param
            param: category_id
            value: "{selected.value}"

  proposal-grid:
    description: 提案网格
    data_source: proposals
    field: items
    layout: grid
    columns: 3
    gap: 24
    item_component: proposal-card
    item_interactions:
      - trigger: click
        action: navigate
        target: "/proposals/{id}"
    pagination:
      type: load_more
      page_size: 20

loading_states:
  proposals:
    type: skeleton
    preset: card
    count: 9

error_states:
  proposals:
    message: 加载提案失败
    retry_button: true

empty_states:
  proposals:
    icon: file-text
    message: 暂无提案
    action:
      label: 发布第一个提案
      target: "/posts/create?type=for_category"
