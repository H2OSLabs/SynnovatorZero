# 组件复用判断标准

## 设计阶段（当前）

当组件仅存在于 `.pen` 设计文件中时，复用判断基于：

### 1. 视觉相似度
- 布局结构相似（如都是卡片、列表项、表单）
- 样式风格一致（颜色、字体、间距遵循 style.pen）

### 2. 功能兼容性
- 新需求是现有组件功能的子集 → 直接复用
- 新需求是现有组件功能的超集 → 扩展组件
- 功能完全不同 → 新建组件

### 3. 扩展方式优先级
1. **Props 扩展**: 通过可选属性支持新变体
2. **Slots 扩展**: 通过插槽支持不同内容
3. **新建变体**: 创建 ComponentName-Variant 形式的新组件

## 代码阶段（未来）

当组件有实际代码实现时，额外考虑：

### 1. 无破坏性原则
修改不能影响已有页面对该组件的使用：
- 新增的 props 必须有默认值
- 不能删除或重命名现有 props
- 不能改变现有行为的默认表现

### 2. 复杂度阈值
- 修改 < 20% 代码量 → 扩展现有组件
- 修改 20-50% → 评估是否抽象公共部分
- 修改 > 50% → 新建组件

### 3. 测试覆盖
- 现有组件的测试必须继续通过
- 新功能需要补充测试用例

## 决策流程图

```
需要新 UI 功能
    │
    ▼
是否有视觉相似的现有组件？
    │
    ├─ 否 → 新建组件
    │
    └─ 是 → 功能是否兼容？
              │
              ├─ 完全兼容 → 直接复用
              │
              ├─ 可扩展 → 修改是否破坏现有功能？
              │             │
              │             ├─ 否 → 扩展组件
              │             └─ 是 → 新建组件
              │
              └─ 不兼容 → 新建组件
```
