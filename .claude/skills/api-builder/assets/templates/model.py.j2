"""{{ model_name }} SQLAlchemy 模型"""
from sqlalchemy import Column, Integer, String, Boolean, DateTime, Float, Text{% if has_enum %}, Enum as SQLEnum{% endif %}{% if has_foreign_key %}, ForeignKey{% endif %}
from sqlalchemy.sql import func
{% if has_relationship %}from sqlalchemy.orm import relationship{% endif %}
{% if enums %}import enum{% endif %}

from app.database import Base

{% for enum in enums %}
class {{ enum.name }}(str, enum.Enum):
    {% for value in enum['values'] %}{{ value.upper() }} = "{{ value }}"
    {% endfor %}

{% endfor %}
class {{ model_name }}(Base):
    """{{ description }}"""
    __tablename__ = "{{ table_name }}"

    id = Column(Integer, primary_key=True, index=True)
    {% for field in fields %}{{ field.name }} = Column({{ field.type }}{% if field.nullable %}, nullable=True{% else %}, nullable=False{% endif %}{% if field.unique %}, unique=True{% endif %}{% if field.index %}, index=True{% endif %}{% if field.default is not none %}, default={{ field.default }}{% endif %}{% if field.server_default is not none %}, server_default={{ field.server_default }}{% endif %})
    {% endfor %}{% if has_timestamps %}created_at = Column(DateTime(timezone=True), server_default=func.now(), nullable=False)
    updated_at = Column(DateTime(timezone=True), onupdate=func.now(), nullable=True)
    {% endif %}
    {% for rel in relationships %}{{ rel.name }} = relationship("{{ rel.model }}"{% if rel.back_populates %}, back_populates="{{ rel.back_populates }}"{% endif %})
    {% endfor %}
