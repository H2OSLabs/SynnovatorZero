"""{{ model_name }} Pydantic schemas"""
from pydantic import BaseModel{% if has_email %}, EmailStr{% endif %}{% if has_url %}, AnyUrl{% endif %}{% if has_uuid %}, UUID4{% endif %}{% if has_field_validator %}, Field{% endif %}
from datetime import datetime{% if has_date %}, date{% endif %}
from typing import Optional{% if has_list %}, List{% endif %}
{% if enums %}from enum import Enum{% endif %}

{% for enum in enums %}
class {{ enum.name }}(str, Enum):
    """{{ enum.description }}"""
    {% for value in enum.values %}{{ value.upper() }} = "{{ value }}"
    {% endfor %}

{% endfor %}
# Shared properties
class {{ model_name }}Base(BaseModel):
    """{{ model_name }} 基础 schema"""
    {% for field in base_fields %}{{ field.name }}: {% if field.optional %}Optional[{{ field.type }}]{% else %}{{ field.type }}{% endif %}{% if field.field_config %} = Field({{ field.field_config }}){% elif field.optional %} = None{% endif %}
    {% endfor %}

# Properties to receive on creation
class {{ model_name }}Create({{ model_name }}Base):
    """创建 {{ model_name }} 的请求 schema"""
    {% for field in required_create_fields %}{{ field.name }}: {{ field.type }}{% if field.field_config %} = Field({{ field.field_config }}){% endif %}
    {% endfor %}

# Properties to receive on update
class {{ model_name }}Update(BaseModel):
    """更新 {{ model_name }} 的请求 schema"""
    {% for field in update_fields %}{{ field.name }}: Optional[{{ field.type }}]{% if field.field_config %} = Field(None, {{ field.field_config }}){% else %} = None{% endif %}
    {% endfor %}

# Properties shared by models stored in DB
class {{ model_name }}InDBBase({{ model_name }}Base):
    """数据库中的 {{ model_name }} 基础 schema"""
    id: int
    {% if has_timestamps %}created_at: datetime
    {% if has_updated_at %}updated_at: Optional[datetime] = None
    {% endif %}{% endif %}
    class Config:
        from_attributes = True

# Properties to return to client
class {{ model_name }}({{ model_name }}InDBBase):
    """{{ model_name }} 响应 schema"""
    pass

# Properties stored in DB
class {{ model_name }}InDB({{ model_name }}InDBBase):
    """数据库中存储的 {{ model_name }} schema"""
    pass
